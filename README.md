# Backend — Node.js / Express API

## Опис проєкту

Цей репозиторій містить **backend-частину веб-додатку**, реалізовану на **Node.js** з використанням **Express.js**.
Backend відповідає за обробку API-запитів, валідацію вхідних даних та збереження повідомлень з форми зворотного зв’язку в базі даних **MongoDB**.

Серверна частина повністю відокремлена від frontend, що забезпечує **кращу масштабованість**, **гнучкість деплою** та **незалежний розвиток** компонентів системи.

---

## Основні можливості

* API-ендпоінт для збереження повідомлень з форми зворотного зв’язку
  (`POST /api/messages`)
* Підключення до **MongoDB** з кешуванням з’єднання
* Валідація вхідних даних:

  * ім’я
  * email
  * номер телефону
  * повідомлення
* Централізована обробка помилок
* Налаштування **CORS** для запитів з frontend

---

## Технології

* **Node.js**
* **Express.js**
* **MongoDB**
* **Mongoose**
* **dotenv**
* **CORS**

---

## Вимоги

Перед початком роботи переконайтесь, що встановлено:

* **Node.js >= 18** (рекомендовано **20+**)
* **MongoDB** (локальна або хмарна, наприклад MongoDB Atlas)

---

## Установка

Клонуйте репозиторій та встановіть залежності:

```bash
git clone <URL_репозиторію>
cd backend
npm install
```

### Налаштування змінних середовища

Створіть файл `.env` у корені проєкту та додайте:

```env
MONGODB_URI=mongodb+srv://<user>:<password>@<cluster>.mongodb.net/<dbname>?retryWrites=true&w=majority
PORT=5000
```

Замініть `<user>`, `<password>`, `<cluster>` та `<dbname>` на відповідні дані з MongoDB.

> ⚠️ Файл `.env` **не повинен комітитись** у Git.

---

## Запуск сервера

### Режим розробки

```bash
node index.js
```

Сервер буде запущений на порту, вказаному в `.env` (за замовчуванням `5000`).

### Production

Для стабільної роботи рекомендується використовувати **PM2** або **Docker**:

```bash
pm2 start index.js
```

### Перевірка запуску

Відкрийте у браузері:

```
http://localhost:5000
```

Очікувана відповідь — `404 Not Found`, що означає, що сервер працює коректно.

---

## API ендпоінти

### `POST /api/messages`

**Body (JSON):**

```json
{
  "name": "string",
  "email": "string",
  "phone": "+38XXXXXXXXXX",
  "message": "string"
}
```

**Валідація:**

* усі поля є обов’язковими
* `phone` повинен:

  * починатися з `+38`
  * мати рівно **13 символів**

**Відповіді:**

* `201 Created`

  ```json
  { "success": true }
  ```
* `400 Bad Request` — помилка валідації
* `500 Internal Server Error` — серверна помилка

---

## Структура проєкту

```text
index.js                # Головний серверний файл
src/dbConnect.js        # Логіка підключення до MongoDB
models/Message.js       # Mongoose-модель повідомлення
.env                    # Змінні середовища (не комітити)
```

---

## Деплой

Можливі варіанти розгортання:

* **Render**
* **Heroku**
* **VPS / Cloud Server**
* **Docker**

### Рекомендації для production:

* Використовувати **MongoDB Atlas**
* Додати **JWT-аутентифікацію**
* Обмежити CORS
* Увімкнути логування (наприклад, `winston` або `morgan`)

---

## Тестування

* Використовуйте **Postman** або **Insomnia** для перевірки API
* Для перевірки підключення до БД:

  ```js
  console.log('Connected to DB');
  ```

  після успішного `dbConnect()`

### Якщо виникають проблеми:

* перевірте логи в консолі
* перевірте `MONGODB_URI`
* переконайтесь, що IP-адреса додана до MongoDB Atlas (Network Access)
